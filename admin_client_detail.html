<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Détail Client – Admin</title>
  
  <link rel="stylesheet" href="/sources/css/style_global.css">
  <link rel="stylesheet" href="/sources/css/style_header.css">
  <link rel="stylesheet" href="/sources/css/style_admin.css">
  <link rel="icon" href="/sources/img/logo_tmp.png" type="image/png">
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="/js/include.js"></script>
  <script defer src="/js/config.js"></script>
  <script defer src="/js/auth.js"></script>
  <script defer src="/js/header.js"></script>
  <script defer src="/js/header-auth.js"></script>

  
</head>

<body>
  <div data-include="partials/header.html"></div>

  <div class="admin-container">
    <div class="admin-header">
      <div>
        <h1 class="admin-title">👤 Détail Client</h1>
      </div>
      <a href="/admin_clients.html" class="btn btn-secondary">← Retour à la liste</a>
    </div>

    <!-- En-tête client -->
    <div class="client-header" id="client-header">
      <div class="loading">
        <div class="spinner"></div>
        <p>Chargement...</p>
      </div>
    </div>

    <!-- Onglets -->
    <div class="content-tabs">
      <button class="content-tab active" onclick="switchContentTab('overview')">📊 Vue d'ensemble</button>
      <button class="content-tab" onclick="switchContentTab('projects')">📂 Projets</button>
      <button class="content-tab" onclick="switchContentTab('quotes')">📄 Devis</button>
      <button class="content-tab" onclick="switchContentTab('history')">🕐 Historique</button>
    </div>

    <!-- Contenu des onglets -->
    <div id="tab-overview" class="tab-panel active">
      <div class="section-card">
        <h3 class="section-title">📋 Informations</h3>
        <div class="info-grid" id="client-info">
          <p style="text-align: center; color: #94a3b8;">Chargement...</p>
        </div>
      </div>

      <div class="section-card">
        <h3 class="section-title">📊 Statistiques</h3>
        <div id="client-stats-detail">
          <p style="text-align: center; color: #94a3b8;">Chargement...</p>
        </div>
      </div>
    </div>

    <div id="tab-projects" class="tab-panel">
      <div class="section-card">
        <h3 class="section-title">📂 Projets du client</h3>
        <div id="projects-list">
          <p style="text-align: center; color: #94a3b8;">Chargement...</p>
        </div>
      </div>
    </div>

    <div id="tab-quotes" class="tab-panel">
      <div class="section-card">
        <h3 class="section-title">📄 Devis du client</h3>
        <div id="quotes-list">
          <p style="text-align: center; color: #94a3b8;">Chargement...</p>
        </div>
      </div>
    </div>

    <div id="tab-history" class="tab-panel">
      <div class="section-card">
        <h3 class="section-title">🕐 Historique d'activité</h3>
        <div class="timeline" id="history-timeline">
          <p style="text-align: center; color: #94a3b8;">Chargement...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal édition client -->
  <div class="modal" id="edit-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">✏️ Modifier le client</h3>
      </div>
      <form id="edit-form">
        <div class="form-group">
          <label class="form-label">Nom complet</label>
          <input type="text" class="form-input" id="edit-fullname">
        </div>
        <div class="form-group">
          <label class="form-label">Entreprise</label>
          <input type="text" class="form-input" id="edit-company">
        </div>
        <div class="form-group">
          <label class="form-label">Téléphone</label>
          <input type="tel" class="form-input" id="edit-phone">
        </div>
        <div class="form-group">
          <label class="form-label">Adresse</label>
          <textarea class="form-textarea" id="edit-address"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Remise (%)</label>
          <input type="number" class="form-input" id="edit-discount" min="0" max="100" step="0.1">
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" style="flex: 1;" onclick="closeEditModal()">
            Annuler
          </button>
          <button type="submit" class="btn btn-primary" style="flex: 1;">
            💾 Enregistrer
          </button>
        </div>
      </form>
    </div>
  </div>

  <script src="js/admin_clients_detail.js"></script>
  <div data-include="partials/footer.html"></div>
    </body>
    </html>